### **垃圾回收**
- 概述
- GC & RC
    - 垃圾回收的由来
    - 逃逸分析的由来
- 垃圾回收，怎么实现？
    - 什么样的是垃圾？
    - 怎么把垃圾找出来？
    - 内存屏障

### **概述**
现代编程语言一般都有垃圾回收功能。这个能极大的减轻程序员的负担，并且减少大部分场景的问题。

### **GC & RC**
RC: 引用计数管理内存的方式
    1. 使用前，为了保护对象不被销毁，计数 +1
    2. 使用完后，计数 -1，计数减到 0 之后，就可以安全销毁了
GC: 垃圾回收管理内存的方式

    golang 的垃圾回收我们经常听到三色标记法，三色指的是白色，灰色，黑色，分别表示三种状态，至于三色标记法的理论此处不表，我们从简单的理解切入。

### **怎么把垃圾找出来？**
```
方法：从根处扫描，把所有的根扫描完，每个根扫描到底。按照之前的三色标记来说，扫描完了的是黑色，正在扫描的是灰色的，没扫描的是白色的。根扫描完了，那么最后只会剩下两种颜色的，黑色，白色。白色就是没用的垃圾，这种清理掉就没事。

根：栈，是扫描的起点，还有一些全局变量也是根，是起点
所谓的垃圾只对于堆上来说。栈上内存是编译器管理的，堆上内存是业务分配，垃圾回收器回收
```
### **垃圾怎么回收？怎么有效安全的回收？**
起初的是最简单的思路STW(stop the world)，暂停所有程序，等待垃圾回收完再运行程序。当然这种模式在生产中不合适后又优化为 [扫描-标记-清除](https://skaygo.blog.csdn.net/article/details/87892434?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control)

